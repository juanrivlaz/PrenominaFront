<h2 mat-dialog-title>Agregar Incidencia</h2>
<mat-dialog-content>
    <div class="ctn-employee">
        <app-avatar [name]="data.name" />
        <div class="name">
            <p>{{ data.name }}</p>
            <span>Código {{ data.codigo }} | {{ data.activity }}</span>
        </div>
    </div>
    <form [formGroup]="formGroup">
        <mat-form-field class="mb-12 mt-12">
            <mat-label>Seleccione un código</mat-label>
            <mat-icon matPrefix>code</mat-icon>
            <mat-select formControlName="incidentCode">
                <mat-option *ngFor="let incident of data.incidentCodes" [value]="incident.code">{{ incident.label }}</mat-option>
            </mat-select>
            @if (getFieldControl('incidentCode')?.hasError('required')) {
              <mat-error>
                El código es requerido
              </mat-error>
            }
        </mat-form-field>
        <mat-form-field class="mb-12" *ngIf="!isPeriod">
            <mat-label>Selecciona una fecha</mat-label>
            <mat-icon matPrefix>event</mat-icon>
            <mat-select formControlName="date">
                <mat-option *ngFor="let date of data.dates" [value]="date.date">{{ date.day }} {{ date.label }}</mat-option>
            </mat-select>
            @if (getFieldControl('date')?.hasError('required')) {
                <mat-error>
                  La fecha es requerida
                </mat-error>
            }
        </mat-form-field>
        <mat-form-field *ngIf="withOperation">
            <mat-label>Ingrese un valor</mat-label>
            <mat-icon matPrefix>123</mat-icon>
            <input type="number" matInput formControlName="customValue">
            @if (getFieldControl('customValue')?.hasError('required')) {
                <mat-error>
                  El valor es requerido
                </mat-error>
            }
        </mat-form-field>
    </form>
</mat-dialog-content>
<mat-dialog-actions>
    <button mat-button (click)="onCancel()">Cancelar</button>
    <button mat-button (click)="submit()">Asignar</button>
</mat-dialog-actions>